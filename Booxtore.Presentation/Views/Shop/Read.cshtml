@using Syncfusion.EJ2
@model Booxtore.Presentation.ViewModels.BookReaderViewModel
@{
    ViewData["Title"] = $"Reading - {Model.Book.Title}";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <!-- Book Header -->
            <div class="bg-light p-3 mb-3 border-bottom">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h4 class="mb-1 text-dark">@Model.Book.Title</h4>
                        <p class="mb-0 text-primary">by @(Model.Book.Author?.Name ?? "Unknown Author")</p>
                    </div>
                    <div>
                        <a href="@Url.Action("Details", new { id = Model.Book.BookId })" class="btn btn-outline-secondary me-2">
                            <i class="fas fa-arrow-left"></i> Back to Details
                        </a>
                        <a href="@Url.Action("Index")" class="btn btn-outline-primary">
                            <i class="fas fa-store"></i> Back to Shop
                        </a>
                    </div>
                </div>
            </div>

            <!-- PDF Viewer -->
            <div class="pdf-viewer-container">
                <div style="width:100%;height:600px">
                    @Html.EJS().PdfViewer("pdfviewer").EnableBookmark(true).DocumentPath(Model.PdfPath).Render()
                </div>
            </div>

            

            <!-- Reading Info -->
            <div class="mt-3 p-3 bg-light border-top">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-dark">Book Information</h6>
                        <p class="mb-1 text-primary"><strong>Category:</strong> @(Model.Book.Category?.Name ?? "Uncategorized")</p>
                        <p class="mb-1 text-primary"><strong>Pages:</strong> @(Model.Book.Pages ?? 0)</p>
                        <p class="mb-0 text-primary"><strong>Published:</strong> @(Model.Book.PublicationDate?.ToString("MMMM dd, yyyy") ?? "Unknown")</p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-dark">Reading Features</h6>
                        <ul class="list-unstyled text-primary">
                            <li><i class="fas fa-bookmark text-primary"></i> Bookmarking enabled</li>
                            <li><i class="fas fa-search text-primary"></i> Text search available</li>
                            <li><i class="fas fa-expand text-primary"></i> Fullscreen mode</li>
                            <li><i class="fas fa-print text-primary"></i> Print available</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('PDF Reader loaded for book: @Model.Book.Title');
        });
    </script>
}
